<Window x:Class="Minimal_Video_Editor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Minimal_Video_Editor"
        mc:Ignorable="d"
        Title="MainWindow" Height="360" Width="640"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Closing="Window_Closing">
    <Window.CommandBindings>
        <CommandBinding Command="Open" Executed="OpenCommandBinding_Executed"/>
        <CommandBinding Command="Save" Executed="SaveCommandBinding_Executed"/>
        <CommandBinding Command="SaveAs" Executed="SaveAsCommandBinding_Executed"/>
        
        <CommandBinding Command="local:MainWindow.SelectTool" Executed="ShowSelectionTool"/>
        <CommandBinding Command="local:MainWindow.CuttingTool" Executed="ShowCuttingTool"/>

        <CommandBinding Command="local:MainWindow.PlayPause" Executed="PlayerTogglePlay"/>

        <CommandBinding Command="local:MainWindow.ImportMediaCommand" Executed="ImportMediaCommandBinding_Executed"/>
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Key="O" Modifiers="Ctrl" Command="Open"></KeyBinding>
        <KeyBinding Key="S" Modifiers="Ctrl" Command="Save"></KeyBinding>
        <KeyBinding Key="S" Modifiers="Ctrl+Shift" Command="SaveAs"></KeyBinding>

        <KeyBinding Key="V" Command="local:MainWindow.SelectTool"></KeyBinding>
        <KeyBinding Key="C" Command="local:MainWindow.CuttingTool"></KeyBinding>

        <KeyBinding Key="Space" Command="local:MainWindow.PlayPause"></KeyBinding>
    </Window.InputBindings>
    <DockPanel>
        <Menu DockPanel.Dock="Top" >
            <MenuItem Header="File">
                <!--<MenuItem Header="New...">
                    <MenuItem Header="This window"></MenuItem>
                    <MenuItem Header="New window"></MenuItem>
                </MenuItem>
                <Separator></Separator>--> <!--TODO: this -->
                <MenuItem x:Name="LoadMenuItem" Header="Load..." Command="Open" InputGestureText="Ctrl+O"></MenuItem>
                <Separator></Separator>
                <MenuItem x:Name="SaveMenuItem" Header="Save" Command="Save" InputGestureText="Ctrl+S"></MenuItem>
                <MenuItem x:Name="SaveAsMenuItem" Header="Save as..." Command="SaveAs" InputGestureText="Ctrl+Shift+S"></MenuItem>
                <Separator></Separator>
                <MenuItem x:Name="ImportMediaMenuItem" Header="Import media..." Command="local:MainWindow.ImportMediaCommand" ></MenuItem>
                <MenuItem Header="Export"></MenuItem> <!--TODO: this -->
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Undo"></MenuItem>
                <!--TODO: these /\ + \/ -->
                <MenuItem Header="Redo"></MenuItem>
            </MenuItem>
        </Menu>

        <Grid Background="Black" >
            <!-- come body html-->
            <Grid.RowDefinitions>
                <RowDefinition Height="60*"/>
                <RowDefinition Height="40*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <!--Riga sopra principale-->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30*"></ColumnDefinition>
                    <ColumnDefinition Width="70*"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" BorderBrush="Black" BorderThickness="2">

                    <Grid Background="Gray" Drop="Grid_Drop" AllowDrop="True">
                        <!--file loader-->
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <WrapPanel x:Name="FileLoaderWrapPanel"/>
                        </ScrollViewer>
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="NoFilesInFileLoaderLabel" TextWrapping="Wrap" TextAlignment="Center" Margin="5, 0, 5, 0">
                            Drag files here to import them into the project
                        </TextBlock>

                    </Grid>
                </Border>
                <Border Grid.Column="1" BorderBrush="Black" BorderThickness="2">
                    <Grid Background="Gray">
                        <!--video player-->
                        <Grid.RowDefinitions>
                            <RowDefinition Height="90*"></RowDefinition>
                            <RowDefinition Height="2"></RowDefinition>
                            <RowDefinition Height="10*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <Image x:Name="CurrentFrameImage" Grid.Row="0"></Image>
                        <!--playback-->

                        <Rectangle Fill="Black" Grid.Row="1"></Rectangle>

                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button x:Name="PlayerPlayButton" Click="PlayerPlayButton_Click" Margin="0, 0, 10 ,0" Padding="0" Background="#000040">
                                <Image Source="/assets/play.png"></Image>
                            </Button>
                            <Button x:Name="PlayerPauseButton" Click="PlayerPauseButton_Click" Margin="0, 0, 10 ,0" Padding="0" Background="#000040">
                                <Image Source="/assets/pause.png"></Image>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
            <Grid Grid.Row="1">
                <!--Riga sotto principale-->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"></ColumnDefinition>
                    <ColumnDefinition ></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" BorderBrush="Black" BorderThickness="2">
                    <Grid  Background="Gray">
                        <!--toolbox-->

                        <StackPanel Orientation="Vertical">
                            <RadioButton x:Name="SelectionToolRadioButton" Checked="SelectionTool_Checked" Style="{StaticResource RadioToTools}" IsChecked="True" Padding="0">
                                <Image Source="/assets/select.png"></Image>
                            </RadioButton>
                            <!--selection tool-->
                            <RadioButton x:Name="CuttingToolRadioButton" Checked="CuttingTool_Checked" Style="{StaticResource RadioToTools}" Padding="0">
                                <Image Source="/assets/cut.png"></Image>
                            </RadioButton>
                            <!--cutting tool-->
                        </StackPanel>
                    </Grid>
                </Border>

                <Border Grid.Column="1" BorderBrush="Black" BorderThickness="2">

                    <Grid Background="Gray">
                        <!--timeline-->
                        <local:Timeline ></local:Timeline>
                    </Grid>
                </Border>
            </Grid>

        </Grid>
    </DockPanel>
</Window>